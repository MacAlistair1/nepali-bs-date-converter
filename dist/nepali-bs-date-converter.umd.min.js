!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).NepaliDateConverter=e()}(this,function(){"use strict";class t{static data(){return{1970:[30,32,31,32,31,30,30,30,29,30,29,31,365],1971:[31,31,32,31,32,30,30,29,30,29,30,30,365],1972:[31,31,32,32,31,29,31,29,30,30,29,31,366],1973:[31,32,31,32,30,30,30,29,30,29,30,30,365],1974:[31,31,32,31,31,30,30,29,30,30,29,31,365],1975:[31,31,32,32,31,30,30,29,30,29,30,30,365],1976:[31,32,31,32,31,30,30,30,29,29,30,31,366],1977:[30,32,31,32,31,31,29,30,30,29,29,31,365],1978:[31,31,32,31,31,31,30,29,30,29,30,30,365],1979:[31,31,32,32,31,30,30,29,30,29,30,30,365],1980:[31,32,31,32,31,30,30,30,29,29,30,31,366],1981:[31,31,31,32,31,31,29,30,30,29,29,31,365],1982:[31,31,32,31,31,31,30,29,30,29,30,30,365],1983:[31,31,32,32,31,30,30,29,30,29,30,30,365],1984:[31,32,31,32,31,30,30,30,29,29,30,31,366],1985:[31,31,31,32,31,31,29,30,30,29,30,30,365],1986:[31,31,32,31,31,31,30,29,30,29,30,30,365],1987:[31,32,31,32,31,30,30,29,30,29,30,30,365],1988:[31,32,31,32,31,30,30,30,29,29,30,31,366],1989:[31,31,31,32,31,31,30,29,30,29,30,30,365],1990:[31,31,32,31,31,31,30,29,30,29,30,30,365],1991:[31,32,31,32,31,30,30,30,29,29,30,30,365],1992:[31,32,31,32,31,30,30,30,29,30,29,31,366],1993:[31,31,31,32,31,31,30,29,30,29,30,30,365],1994:[31,31,32,31,31,31,30,29,30,29,30,30,365],1995:[31,32,31,32,31,30,30,30,29,29,30,30,365],1996:[31,32,31,32,31,30,30,30,29,30,29,31,366],1997:[31,31,32,31,31,31,30,29,30,29,30,30,365],1998:[31,31,32,31,32,30,30,29,30,29,30,30,365],1999:[31,32,31,32,31,30,30,30,29,29,30,31,366],2e3:[30,32,31,32,31,30,30,30,29,30,29,31,365],2001:[31,31,32,31,31,31,30,29,30,29,30,30,365],2002:[31,31,32,32,31,30,30,29,30,29,30,30,365],2003:[31,32,31,32,31,30,30,30,29,29,30,31,366],2004:[30,32,31,32,31,30,30,30,29,30,29,31,365],2005:[31,31,32,31,31,31,30,29,30,29,30,30,365],2006:[31,31,32,32,31,30,30,29,30,29,30,30,365],2007:[31,32,31,32,31,30,30,30,29,29,30,31,366],2008:[31,31,31,32,31,31,29,30,30,29,29,31,365],2009:[31,31,32,31,31,31,30,29,30,29,30,30,365],2010:[31,31,32,32,31,30,30,29,30,29,30,30,365],2011:[31,32,31,32,31,30,30,30,29,29,30,31,366],2012:[31,31,31,32,31,31,29,30,30,29,30,30,365],2013:[31,31,32,31,31,31,30,29,30,29,30,30,365],2014:[31,31,32,32,31,30,30,29,30,29,30,30,365],2015:[31,32,31,32,31,30,30,30,29,29,30,31,366],2016:[31,31,31,32,31,31,29,30,30,29,30,30,365],2017:[31,31,32,31,31,31,30,29,30,29,30,30,365],2018:[31,32,31,32,31,30,30,29,30,29,30,30,365],2019:[31,32,31,32,31,30,30,30,29,30,29,31,366],2020:[31,31,31,32,31,31,30,29,30,29,30,30,365],2021:[31,31,32,31,31,31,30,29,30,29,30,30,365],2022:[31,32,31,32,31,30,30,30,29,29,30,30,365],2023:[31,32,31,32,31,30,30,30,29,30,29,31,366],2024:[31,31,31,32,31,31,30,29,30,29,30,30,365],2025:[31,31,32,31,31,31,30,29,30,29,30,30,365],2026:[31,32,31,32,31,30,30,30,29,29,30,31,366],2027:[30,32,31,32,31,30,30,30,29,30,29,31,365],2028:[31,31,32,31,31,31,30,29,30,29,30,30,365],2029:[31,31,32,31,32,30,30,29,30,29,30,30,365],2030:[31,32,31,32,31,30,30,30,29,29,30,31,366],2031:[30,32,31,32,31,30,30,30,29,30,29,31,365],2032:[31,31,32,31,31,31,30,29,30,29,30,30,365],2033:[31,31,32,32,31,30,30,29,30,29,30,30,365],2034:[31,32,31,32,31,30,30,30,29,29,30,31,366],2035:[30,32,31,32,31,31,29,30,30,29,29,31,365],2036:[31,31,32,31,31,31,30,29,30,29,30,30,365],2037:[31,31,32,32,31,30,30,29,30,29,30,30,365],2038:[31,32,31,32,31,30,30,30,29,29,30,31,366],2039:[31,31,31,32,31,31,29,30,30,29,30,30,365],2040:[31,31,32,31,31,31,30,29,30,29,30,30,365],2041:[31,31,32,32,31,30,30,29,30,29,30,30,365],2042:[31,32,31,32,31,30,30,30,29,29,30,31,366],2043:[31,31,31,32,31,31,29,30,30,29,30,30,365],2044:[31,31,32,31,31,31,30,29,30,29,30,30,365],2045:[31,32,31,32,31,30,30,29,30,29,30,30,365],2046:[31,32,31,32,31,30,30,30,29,29,30,31,366],2047:[31,31,31,32,31,31,30,29,30,29,30,30,365],2048:[31,31,32,31,31,31,30,29,30,29,30,30,365],2049:[31,32,31,32,31,30,30,30,29,29,30,30,365],2050:[31,32,31,32,31,30,30,30,29,30,29,31,366],2051:[31,31,31,32,31,31,30,29,30,29,30,30,365],2052:[31,31,32,31,31,31,30,29,30,29,30,30,365],2053:[31,32,31,32,31,30,30,30,29,29,30,30,365],2054:[31,32,31,32,31,30,30,30,29,30,29,31,366],2055:[31,31,32,31,31,31,30,29,30,29,30,30,365],2056:[31,31,32,31,32,30,30,29,30,29,30,30,365],2057:[31,32,31,32,31,30,30,30,29,29,30,31,366],2058:[30,32,31,32,31,30,30,30,29,30,29,31,365],2059:[31,31,32,31,31,31,30,29,30,29,30,30,365],2060:[31,31,32,32,31,30,30,29,30,29,30,30,365],2061:[31,32,31,32,31,30,30,30,29,29,30,31,366],2062:[31,31,31,32,31,31,29,30,29,30,29,31,365],2063:[31,31,32,31,31,31,30,29,30,29,30,30,365],2064:[31,31,32,32,31,30,30,29,30,29,30,30,365],2065:[31,32,31,32,31,30,30,30,29,29,30,31,366],2066:[31,31,31,32,31,31,29,30,30,29,29,31,365],2067:[31,31,32,31,31,31,30,29,30,29,30,30,365],2068:[31,31,32,32,31,30,30,29,30,29,30,30,365],2069:[31,32,31,32,31,30,30,30,29,29,30,31,366],2070:[31,31,31,32,31,31,29,30,30,29,30,30,365],2071:[31,31,32,31,31,31,30,29,30,29,30,30,365],2072:[31,32,31,32,31,30,30,29,30,29,30,30,365],2073:[31,32,31,32,31,30,30,30,29,29,30,31,366],2074:[31,31,31,32,31,31,30,29,30,29,30,30,365],2075:[31,31,32,31,31,31,30,29,30,29,30,30,365],2076:[31,32,31,32,31,30,30,30,29,29,30,30,365],2077:[31,32,31,32,31,30,30,30,29,30,29,31,366],2078:[31,31,31,32,31,31,30,29,30,29,30,30,365],2079:[31,31,32,31,31,31,30,29,30,29,30,30,365],2080:[31,32,31,32,31,30,30,30,29,29,30,30,365],2081:[31,32,31,32,31,30,30,30,29,30,29,31,366],2082:[31,31,31,32,31,31,30,29,30,29,30,30,365],2083:[31,31,32,31,31,31,30,29,30,29,30,30,365],2084:[31,32,31,32,31,30,30,30,29,29,30,31,366],2085:[30,32,31,32,31,30,30,30,29,30,29,31,365],2086:[31,31,32,31,31,31,30,29,30,29,30,30,365],2087:[31,31,32,32,31,30,30,29,30,29,30,30,365],2088:[31,32,31,32,31,30,30,30,29,29,30,31,366],2089:[30,32,31,32,31,30,30,30,29,30,29,31,365],2090:[31,31,32,31,31,31,30,29,30,29,30,30,365],2091:[31,31,32,32,31,30,30,29,30,29,30,30,365],2092:[31,32,31,32,31,30,30,30,29,29,30,31,366],2093:[31,31,31,32,31,31,29,30,30,29,29,31,365],2094:[31,31,32,31,31,31,30,29,30,29,30,30,365],2095:[31,31,32,32,31,30,30,29,30,29,30,30,365],2096:[31,32,31,32,31,30,30,30,29,29,30,31,366],2097:[31,31,31,32,31,31,29,30,30,29,30,30,365],2098:[31,31,32,31,31,31,30,29,30,29,30,30,365],2099:[31,31,32,32,31,30,30,29,30,29,30,30,365]}}static nepaliMonthsInEng(){return["Baisakh","Jestha","Ashar","Shrawan","Bhadra","Ashoj","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"]}static nepaliMonthsInNep(){return["वैशाख","जेठ","असार","साउन","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"]}static nepaliWeekDays(){return["आइतवार","सोमवार","मंगलबार","बुधवार","बिहीवार","शुक्रवार","शनिवार"]}static nepaliDigits(){return["०","१","२","३","४","५","६","७","८","९"]}static getYear(t){return this.data()[t]??null}}class e{static bsData=t.data();static refBS={year:2062,month:1,day:1};static refAD=new Date("2005-04-14T00:00:00Z");static startYear=1970;static monthsNep=t.nepaliMonthsInNep();static weekdaysNep=t.nepaliWeekDays();static digitsNep=t.nepaliDigits();constructor(t={}){const a=t.start_year||e.startYear;if(a>e.startYear&&(e.startYear=a),isNaN(e.refAD.getTime()))throw new Error("Initialization Error: Reference AD Date is invalid.")}static normalize(t,e="en"){const a=t.replace(/\D/g,"");let r,n,i;if(8===a.length)r=a.substring(0,4),n=a.substring(4,6),i=a.substring(6,8);else{if(7!==a.length)throw new Error(`Invalid date format: ${t}`);{r=a.substring(0,4);const t=a.substring(4);parseInt(t.substring(0,1))>1?(n="0"+t.substring(0,1),i=t.substring(1,3)):(n=t.substring(0,2),i="0"+t.substring(2,3))}}const s=`${r}-${n}-${i}`;if("en"===e){const t=new Date(Date.UTC(parseInt(r),parseInt(n)-1,parseInt(i)));if(isNaN(t.getTime())||t.getUTCFullYear()!=parseInt(r))throw new Error(`Invalid AD date: ${s}`)}return`${r.padStart(4,"0")}-${n.padStart(2,"0")}-${i.padStart(2,"0")}`}static totalDaysSinceStartYear(t,a,r){let n=0;for(let a=e.startYear;a<t;a++){if(!e.bsData[a])throw new Error(`BS Year ${a} not in dataset`);n+=e.bsData[a][12]}for(let r=1;r<a;r++)n+=e.bsData[t][r-1];return n+=r-1,n}static bsToAd(t){const[a,r,n]=e.normalize(t,"np").split("-").map(Number);if(!e.bsData[a])throw new Error("BS Year out of range");const i=e.refBS,s=e.refAD,o=e.totalDaysSinceStartYear(i.year,i.month,i.day),d=e.totalDaysSinceStartYear(a,r,n)-o,l=new Date(s.getTime());return l.setUTCDate(l.getUTCDate()+d),`${l.getUTCFullYear().toString().padStart(4,"0")}-${(l.getUTCMonth()+1).toString().padStart(2,"0")}-${l.getUTCDate().toString().padStart(2,"0")}`}static adToBs(t,a=!1){const[r,n,i]=e.normalize(t).split("-").map(Number),s=new Date(Date.UTC(r,n-1,i)),o=e.refBS,d=e.refAD,l=Math.round((s.getTime()-d.getTime())/864e5);let p=o.year,c=o.month,g=o.day,S=l;for(;0!==S;){const t=e.bsData[p]?.[c-1];if(void 0===t)throw new Error(`BS Year ${p} not in dataset during conversion.`);S>0?(g++,g>t&&(g=1,c++,c>12&&(c=1,p++)),S--):(g--,g<1&&(c--,c<1&&(c=12,p--),g=e.bsData[p][c-1]),S++)}const D=`${p.toString().padStart(4,"0")}-${c.toString().padStart(2,"0")}-${g.toString().padStart(2,"0")}`;return a?{year:p,month:c,day:g}:D}static isValidBSDate(t){if(!/^\d{4}-\d{2}-\d{2}$/.test(t))return!1;try{const[a,r,n]=t.split("-").map(Number);if(!e.bsData[a])return!1;if(r<1||r>12)return!1;const i=e.bsData[a][r-1];return!(n<1||n>i)&&e.adToBs(e.bsToAd(t))===t}catch(t){return!1}}static isValidADDate(t){if(!/^\d{4}-\d{2}-\d{2}$/.test(t))return!1;try{const[a,r,n]=t.split("-").map(Number),i=new Date(Date.UTC(a,r-1,n));return!isNaN(i.getTime())&&i.getUTCFullYear()===a&&e.bsToAd(e.adToBs(t))===t}catch(t){return!1}}static weekdayAD(t,a="en"){const r=e.normalize(t),n=new Date(`${r}T00:00:00Z`),i=n.getUTCDay();return"np"===a?e.weekdaysNep[i]:n.toLocaleDateString("en-US",{weekday:"long",timeZone:"UTC"})}static weekdayBS(t,a="en"){return e.weekdayAD(e.bsToAd(t),a)}static getBSInfo(t){if(!e.isValidBSDate(t))return{};const[a,r,n]=t.split("-").map(Number),i=e.bsToAd(t),s=e.bsData[a][12],o=e.totalDaysSinceStartYear(a,r,n)-e.totalDaysSinceStartYear(a,1,1)+1,d=(new Date).toISOString().substring(0,10),l=e.adToBs(d),[p,c,g]=l.split("-").map(Number),S=e.totalDaysSinceStartYear(a,r,n)-e.totalDaysSinceStartYear(p,c,g);return{bs:t,ad:i,weekday:e.weekdayBS(t),total_days_in_year:s,day_of_year:o,diff_days_from_today:S}}static getADInfo(t){if(!e.isValidADDate(t))return{};const a=e.adToBs(t),[r,n,i]=a.split("-").map(Number),s=e.bsData[r][12],o=e.totalDaysSinceStartYear(r,n,i)-e.totalDaysSinceStartYear(r,1,1)+1,d=(new Date).toISOString().substring(0,10),l=e.adToBs(d),[p,c,g]=l.split("-").map(Number),S=e.totalDaysSinceStartYear(r,n,i)-e.totalDaysSinceStartYear(p,c,g);return{ad:t,bs:a,weekday:e.weekdayAD(t),total_days_in_year:s,day_of_year:o,diff_days_from_today:S}}static digitToNepali(t){return e.digitsNep[parseInt(t)]}static formattedNepaliDate(t,a="Y-m-d",r="en"){const n=e.normalize(t,"np");if(!e.isValidBSDate(n))throw new Error(`Invalid BS date: ${n}`);const[i,s,o]=n.split("-").map(Number),d=e.bsToAd(n),l=new Date(`${d}T00:00:00Z`).getUTCDay();let p=a;const c={Y:i.toString().padStart(4,"0"),m:s.toString().padStart(2,"0"),d:o.toString().padStart(2,"0")};for(const[t,e]of Object.entries(c))p=p.replace(new RegExp(t,"g"),e);if("en"===r){const t={F:e.monthsNep[s-1],l:e.weekdayAD(d)};for(const[e,a]of Object.entries(t))p=p.replace(new RegExp(e,"g"),a);return p}const g={Y:String(i).padStart(4,"0").split("").map(e.digitToNepali).join(""),m:String(s).padStart(2,"0").split("").map(e.digitToNepali).join(""),d:String(o).padStart(2,"0").split("").map(e.digitToNepali).join(""),F:e.monthsNep[s-1],l:e.weekdaysNep[l]};let S=a;for(const[t,e]of Object.entries(g))S=S.replace(new RegExp(t,"g"),e);return S}static formattedEnglishDate(t,a="Y-m-d",r="en"){const n=e.normalize(t);if(!e.isValidADDate(n))throw new Error(`Invalid AD date: ${n}`);const i=new Date(`${n}T00:00:00Z`),[s,o,d]=n.split("-").map(Number);let l=a;if("en"===r){const t={Y:s.toString().padStart(4,"0"),m:o.toString().padStart(2,"0"),d:d.toString().padStart(2,"0"),F:i.toLocaleDateString("en-US",{month:"long",timeZone:"UTC"}),l:i.toLocaleDateString("en-US",{weekday:"long",timeZone:"UTC"})};for(const[e,a]of Object.entries(t))l=l.replace(new RegExp(e,"g"),a);return l}const p=e.adToBs(n),[c,g,S]=p.split("-").map(Number),D=i.getUTCDay(),u=String(S).padStart(2,"0").split("").map(e.digitToNepali).join(""),f=String(g).padStart(2,"0").split("").map(e.digitToNepali).join(""),m={Y:String(c).padStart(4,"0").split("").map(e.digitToNepali).join(""),m:f,d:u,F:e.monthsNep[g-1],l:e.weekdaysNep[D]};for(const[t,e]of Object.entries(m))l=l.replace(new RegExp(t,"g"),e);return l}}return e});
